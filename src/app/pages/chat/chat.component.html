<div class="container-fluid p-3">
    <div class="row">
        @if(!!isChatEnabled) {
            <div class="col-12 mchatblk p-3">
                <div class="col-12 col-md-6 col-lg-3 col-xl-3 col-xxl-3 muserslistblk">
                    <div class="userslistblk">
                        <ul>
                            <li *ngFor="let usersx of usersList" class="mt-3">
                                <a href="/chat/{{usersx.userId}}" (click)="talkToThisUser(usersx.userId)"
                                    [class]="!!isUserSelected && userId == usersx.userId ? 'userchatsel' : ''">
                                    <img src="assets/{{usersx.avatarUrl}}" class="img-fluid img-rounded img-avatar" width="50"
                                        height="50" />
                                    <span class="ms-3">{{usersx.firstName + " " + usersx.lastName}}</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-9 col-xl-9 col-xxl-9 mchatmsgsblk">
                    <div class="chatmsgsblk" *ngIf="chatMessagesData">
                        <div *ngIf="chatMessagesData.length > 0">
                            <div *ngFor="let chmsgs of chatMessagesData">
                                <div *ngFor="let chusers of usersList">
                                    <div *ngIf="chusers.userId == chmsgs.userId">
                                        <p>{{chusers.firstName + ' ' + chusers.lastName}} says: </p>
                                        <p>{{chmsgs.description}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="chatMessagesData.length == 0">
                            <div class="d-flex flex-column justify-content-center align-items-center errblk">
                                <mat-icon>error</mat-icon>
                                <h2 class="tjustify mt-3">{{ 'navbar.chatMessagesData' | translate }}</h2>
                            </div>
                        </div>
                    </div>
                    <form [formGroup]="chatMessageForm" (ngSubmit)="onSubmit()" class="chatmsgform mt-3">
                        <mat-form-field class="w-100">
                            <textarea id="description" formControlName="description" class="form-control text-start w-100"
                                cols="1" rows="3" placeholder="Write something here..." resize required matInput></textarea>
                        </mat-form-field>
                        <div class="form-group mt-3">
                            <button type="button" mat-flat-button color="warn" (click)="deleteAll()">Delete all</button>
                            <button type="reset" mat-flat-button color="primary" class="ms-3">Clear</button>
                            <button type="submit" class="ms-3" mat-flat-button color="accent"
                                [disabled]="!chatMessageForm.valid">
                                Submit
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        } @else {
            <div class="d-flex flex-column justify-content-center align-items-center errblk">
                <mat-icon>error</mat-icon>
                <h2 class="tjustify mt-3">This chat is currently disabled. Please go back!</h2>
                <a routerLink="/newsfeed" mat-flat-button color="primary" class="btn btnback mt-3">Back</a>
            </div>
        }
    </div>
</div>